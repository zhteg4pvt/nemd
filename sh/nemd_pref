 #!/bin/sh
 # Under the BSD 3-Clause License by Teng Zhang (zhteg4@gmail.com)
 : '
 Setup MacBook (Sonoma 14.5) and Ubuntu (22.04 LTS) preference.
 '

# Terminal, Prompt, and Other
case $(uname) in
  Darwin*)
    (brew -v) || . ~/.zprofile
    brew install --cask iterm2 microsoft-powerpoint microsoft-word pycharm-ce
    # Mark directory as Source Root to avoid 'python cannot find declaration to go to'
    # Editor > Code Stype > Hard wrap at: 80 for yapf consistency    zsh -c "setopt prompt_subst"
    grep prompt ~/.zshrc || echo 'prompt="%F{240}%n%F{yellow}@%F{green}%m %F{blue}%1~ %F{red}$(git branch --show-current 2>/dev/null)%F{reset}: "' >> ~/.zshrc
    grep 'alias ls' ~/.zshrc || echo 'alias ls="ls --color"' >> ~/.zshrc
    grep 'alias cdg' ~/.zshrc || echo 'alias cdg="cd ~/git/nemd"' >> ~/.zshrc
    source ~/.zshrc
    # The amixs sets both cursor and background in black
    osascript -e 'tell application "System Events" to tell appearance preferences to set dark mode to true'
    ;;
  Linux*)
    ;;
 esac

# Editor
git config --global core.editor "vim"
[ -d ~/.vim_runtime ] || git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime
[ -d ~/.vim_runtime ] && sh ~/.vim_runtime/install_awesome_vimrc.sh

# Git
if [ -z "$(git config user.name)" ]; then
  git config --global user.email $(whoami)@gmail.com
  git config --global user.name $(whoami)
fi
