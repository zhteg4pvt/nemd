# /bin/sh
# Licensed under the BSD 3-Clause License. Authors: Teng Zhang (zhteg4@gmail.com)
: '
Set up the environment for the sh, workflow, driver module, and submodule directories.

Usage:
  . premake
  source premake
'

# Shell Type and Root Directory
if [ $(basename $0) = 'premake' ]
then
  NEMD_SRC="$0" && echo "zsh"
elif [ $BASH_SOURCE ]
  then
  NEMD_SRC=${BASH_SOURCE[0]} && echo "POSIX"
else
  x="$(lsof -p $$ -Fn0 | tail -1 | tr -d "\0")" && NEMD_SRC=${x#*n} && echo "dash"
fi
[ ! -f $NEMD_SRC ] && echo "Cannot locate the source root" && return 1
export NEMD_SRC="$(readlink -f ${NEMD_SRC} | xargs dirname)" && echo $NEMD_SRC

. $NEMD_SRC/sh/nemd_func

# Packages: NEMD, LAMMPS, and ALAMODE
add_pypath $NEMD_SRC/module

# Shell, Driver, Workflow, and Alamode
add_path $NEMD_SRC/sh
add_path $NEMD_SRC/driver
add_path $NEMD_SRC/workflow
add_path $NEMD_SRC/module/alamode/alamode/tools
